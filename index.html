<!-- 
・ARButton
ARButtonを使用すると、デバイスがWebXRをサポートしているかどうかを確認し、サポートされている場合はARセッションを開始するためのボタンを簡単に作成することができます。
サポートしていない場合は、ボタンにAR NOT AUPPORTED と表示される

・hittest
平面検知

・3Dモデル
3Dモデルを作成して描画


 -->


<!-- 
参考

https://qiita.com/tenugui_taro/items/18901af261a23b0670be
https://chat.openai.com/c/4086099e-a2d7-44a7-9215-47eedcc1615e

 -->





     

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js AR Example</title>
    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script> -->
    <!-- <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/jsm/webxr/ARButton.js"></script> -->
   
    <script type="module">
      // Three.module.js用
      import * as THREE from 'https://cdn.skypack.dev/three@0.135.0/build/three.module.js';

      // ARButton用
      import { ARButton } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/webxr/ARButton.js';
     
      //  GLTFLoader用
      import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/loaders/GLTFLoader.js';



// Three.jsのAR用の変数を定義
let renderer, scene, camera, arButton;

// 初期化関数
function init() {
  // WebGLRendererインスタンスを作成(antialias: true はオプション(エッジの滑らかさを有効))
  renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Three.jsのシーンを作成
  scene = new THREE.Scene();

  // AR用のカメラを作成
  camera = new THREE.Camera();

  // ARボタンを作成
  arButton = new ARButton(renderer);

  // ARセッションの開始
  arButton.addEventListener('click', function () {
    // セッションが開始された後の処理を記述
    // 3Dモデルの読み込みや配置など
    // ここにARセッション開始後のコードを記述してください


    // 3Dモデルのパス
    const modelPath = './cube_small.glb';

    // GLTFLoaderのインスタンスを作成
    const loader = new GLTFLoader();

    // 3Dモデルを読み込む
    loader.load(modelPath, function (gltf) {
      // モデルのシーンを取得
      const modelScene = gltf.scene;

      // モデルのサイズや位置を調整
      // 例えば:
      modelScene.scale.set(0.1, 0.1, 0.1);
      modelScene.position.set(0, 0, -1); // 画面手前に配置

      // モデルをARシーンに追加
      scene.add(modelScene);
    });







  });

  // アニメーションループの開始
  animate();
}

// アニメーションループ関数
function animate() {
  renderer.setAnimationLoop(render);
}

// レンダリング関数
function render() {
  // カメラとシーンを更新
  camera.updateMatrixWorld();
  renderer.render(scene, camera);
}

// 初期化関数の呼び出し
init();




      

      // // ARButtonを使用したコードを記述する


      // // WebGLRendererインスタンスを作成(antialias: true はオプション(エッジの滑らかさを有効))
      // const renderer = new THREE.WebGLRenderer({ antialias: true });
      // // 描画領域のサイズ(幅と高さ)
      // // windowを付けることで、ウィンドウが変更された場合もThree.jsの描画が適切に調整される
      // renderer.setSize(window.innerWidth, window.innerHeight);
      // // Three.jsの3DシーンをHTMLページ上に表示
      // // 親要素.appendChild(子要素(追加するもの));
      // // Three.jsの描画領域をHTMLドキュメントの<body>要素に追加し、描画内容を表示するための領域を提供する
      // // appendChild:指定された要素を親要素の子要素として追加する
      // // document.body:HTMLドキュメントの<body>要素
      // // renderer.domElement:Three.jsのWebGLRendererが生成した描画領域を表す
      // document.body.appendChild(renderer.domElement);
      // // ARButton(WebXRをサポートするデバイスでARセッションを開始するためのボタン)をHTMLページに表示
      // document.body.appendChild(ARButton.createButton(renderer));


    </script>



    
  </body>
</html>


 



